{% extends "layout.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<body>
    <div class="ml-4 mt-2">
    <h1><u>Nearby Locations</u></h1>
    </div>
    {# Create a cointainer for scrollable and clickable items   #}
    <div>
        <div class="container-fluid row py-4 justify-content-center">
            <div class="col-6 text-center">
                <div class="container-fluid rounded" style="max-height: 500px; overflow-y: auto">
                    <ul class="list-unstyled">
                        {% for place in places %}
                            <li class="container-fluid py-3 my-1 rounded btn btn-outline-dark" onclick="updateDestination({{ place.geo_location["lat"] }}, {{ place.geo_location["lng"] }}, '{{ place.name }}')">
                                <div class="row">
                                    <div class="col-auto">
                                        <h3>{{ place.name }}</h3>
                                    </div>
                                    <div class="col text-right">
                                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                    </div>
                                </div>
                                <div class="row ml-1">
                                    {# Website #}
                                    <div class="mx-1">
                                    {% if place.website %}
                                        <button type="button" class="btn btn-primary" onclick=" window.open('{{ place.website }}','_blank')">Website</button>
                                    {% else %}
                                        <button type="button" class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Website Unavailable" disabled>Website</button>
                                    {% endif %}
                                    </div>
                                    <div class="mx-1">
                                    {# Phone Number #}
                                    {% if place.local_phone_number %}
                                        <a href="tel:{{ place.local_phone_number }}" class="btn btn-primary">Call</a>
                                    {% else %}
                                        <button type="button" class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Calling Unavailable" disabled>Call</button>
                                    {% endif %}
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

            {# Map Object - from user coordinates WIP#}
            <!--Script for map/ probably api intensive-->
            <script src="{{ url_for('static', filename='js/map.js') }}"></script>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAtW5w3ZWh3ybR-1TDFZLWcVw-qiSSlEFY&callback=initMap&libraries=&v=weekly" async></script>

            <div class="col-md-6">
                <div id="map" style="height: 400px; width: 95%;"></div>
            </div>
        </div>
    </div>
</body>
{% endblock %}